# ğŸ›¡ï¸ testproject - Guardian Security Service

Advanced security and policy enforcement service for testproject.

## ğŸ¯ Overview

The Guardian Security Service provides comprehensive security monitoring, policy enforcement, and compliance checking for your ABI system.

## ğŸš€ Features

- **Policy Enforcement**: Real-time validation using Open Policy Agent (OPA)
- **Security Monitoring**: Continuous system security state monitoring
- **Risk Assessment**: Advanced risk scoring with contextual analysis
- **Audit Logging**: Comprehensive audit trails for compliance
- **Emergency Controls**: Fail-safe mechanisms and emergency shutdown
- **Security Dashboard**: Real-time security metrics and monitoring
- **Alert System**: Configurable alerting for security events

## ğŸ”§ Configuration

### Environment Variables

```bash
AGENT_HOST=0.0.0.0
AGENT_PORT=11438
OPA_URL=http://testproject-opa:8181
MAX_RISK_THRESHOLD=0.7
GUARDIAL_DASHBOARD_PORT=8080
EMERGENCY_LOG_DIR=/app/emergency_logs
```

### Ports

- **11438**: Guardian API endpoint
- **8080**: Security Dashboard
- **8181**: OPA Policy Server

## ğŸ“¡ API Endpoints

### Security Validation
- `POST /validate` - Validate action against policies
- `POST /validate/workflow` - Validate workflow execution
- `POST /validate/communication` - Validate inter-agent communication

### Emergency Controls
- `POST /emergency/shutdown` - Emergency system shutdown
- `GET /health` - Security health check
- `GET /policies/status` - Policy engine status

### Dashboard
- `GET /` - Security dashboard (port 8080)
- `GET /metrics` - Prometheus metrics

## ğŸ”’ Security Policies

Guardian enforces immutable core policies:

- **Self-Replication Protection**: Blocks agent self-replication
- **Policy Protection**: Prevents policy modification by agents
- **System Access Control**: Restricts system-level access
- **Sensitive Data Protection**: Monitors sensitive data access

## ğŸ“Š Monitoring

Access the security dashboard at:
```
http://localhost:8080 | default('8080') }}
```

View metrics at:
```
http://localhost:11438/metrics
```

## ğŸš¨ Emergency Response

Guardian includes an emergency response system that:
- Logs all emergency events with cryptographic signing
- Provides immediate system shutdown capabilities
- Maintains immutable emergency logs
- Alerts on critical security violations

## ğŸ“ Audit Logs

All security decisions are logged to:
- Application logs: `./logs/guardian.log`
- Emergency logs: `./services/guardian/emergency_logs/`
- Audit database: `./services/guardian/audit.db`

## ğŸ” Health Checks

Guardian provides comprehensive health checks:

```bash
curl http://localhost:11438/health
```

Response includes:
- Overall security status
- OPA connectivity
- Policy validation status
- Emergency system status
- Recent security metrics

## ğŸ› ï¸ Development

### Local Testing

```bash
# Start OPA server
docker-compose up testproject-opa

# Start Guardian
docker-compose up testproject-guardian

# View logs
docker-compose logs -f testproject-guardian
```

### Policy Development

Custom policies can be added to:
```
./services/guardian/opa/policies/
```

## ğŸ“š Documentation

For more information, see:
- [Guardian Architecture](https://docs.abi-core.dev/architecture/guardian)
- [Security Policies](https://docs.abi-core.dev/security/policies)
- [Emergency Response](https://docs.abi-core.dev/security/emergency)

---

**Generated by ABI-Core** | **Project**: testproject | **Domain**: general